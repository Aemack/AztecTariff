@page "/"

@inject NavigationManager nav
@inject PDFDataService pDFDataService
@inject Settings settings
@inject TariffDatabaseContext dbContext
@inherits BasePageClass

@using AztecTariff.Models;
@using AztecTariff.Services;
@using AztecTariffModels.Models;
@using Blazorise.Animate;
@using Microsoft.EntityFrameworkCore;


<PageTitle>Zonal - Login</PageTitle>

@if (isLoading)
{
    <LoadingOverlayComponent></LoadingOverlayComponent>
}

<div class="cubic-background h-100">
    <div class="cube"></div>
    <div class="cube"></div>
    <div class="cube"></div>
    <div class="cube"></div>
    <div class="cube"></div>
    <div class="cube"></div>
    <div class="cube"></div>
    <div class="cube"></div>
    <div class="cube"></div>
    <div class="cube"></div>


    <div class="d-flex flex-row justify-content-center align-items-center h-100 login__title">
        @if (settings.IsLoggedIn)
        {
            <a href="/SiteTariff" class="link-unstyled">
                <div class="d-flex flex-column">
                    <img src="images/zonallogo.png" />
                    @*<img src="images/Zonal-logo-MW.svg" class="h-100" />*@
                    <h2 class="text-center">Aztec Tariff</h2>
                </div>
            </a>
        }
        else
        {
            <div class="bg-primary d-flex flex-column justify-content-center align-items-center rounded mybs p-5">
                <div class="justify-content-center align-items-center rounded d-flex flex-column my-5">
                    <div class="container">
                        <div class="row">
                            <div>
                                <div class="d-flex flex-row justify-content-center align-items-center mb-4">
                                    <img src="images/Zonal-logo-MW.svg" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col d-flex flex-column justify-content-center">
                                <p class="my-auto" style="font-size:32px">Username:</p>
                            </div>
                            <div class="col d-flex flex-column justify-content-center" onkeydown="@Enter">
                                <TelerikTextBox @bind-Value="username" Class="@usernameErrorClass" />
                            </div>
                        </div>
                        @if (usernameError)
                        {
                            <Blazorise.Animate.Animate Animation="Animations.SlideDown">
                                <div class="d-flex flex-column justify-content-center text-center">
                                    <label class="text-danger fs-6">Username is not valid</label>
                                </div>
                            </Blazorise.Animate.Animate>
                        }
                        <div class="row">
                            <div class="col d-flex flex-column justify-content-center">
                                <p class="my-auto" style="font-size:32px">Password:</p>
                            </div>
                            <div class="col d-flex flex-column justify-content-center" onkeydown="@Enter">
                                <TelerikTextBox @bind-Value="password" Password="true" Class="@passwordErrorClass" />
                            </div>
                        </div>
                        @if (passwordError)
                        {
                            <Blazorise.Animate.Animate Animation="Animations.SlideDown">
                                <div class="d-flex flex-column justify-content-center text-center">
                                    <label class="text-danger fs-6">Password is not valid</label>
                                </div>
                            </Blazorise.Animate.Animate>
                        }
                        <div class="row">
                            <div>
                                <div class="d-flex flex-row justify-content-center align-items-center mt-5 mb-2">
                                    <button class="btn text-light bg-primary-alt" @onclick=LogIn>LOGIN</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

